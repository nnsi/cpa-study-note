# 2026-01-19

## 今日やったこと

公認会計士学習サポートアプリの設計を行った。要件定義（require.md）を読み、ユーザーと対話しながら技術スタック・アーキテクチャを詰めていった。

- 技術選定: Vite + React + Tanstack Router / Hono + Cloudflare Workers / D1 + Drizzle
- APIアーキテクチャ: クリーンアーキテクチャ + Package by Feature + 関数型
- フロントエンドアーキテクチャ: Logic / UI Hooks / Component の3層分離
- 共有スキーマ: Zodで一元管理
- 認証: マルチプロバイダー対応設計（MVP: Google）
- レイアウト: PC / モバイル両対応
- 設計書を3ファイルに分割（summary / backend / frontend）

## 感想

ユーザーが技術的な判断を明確に持っていて、私が選択肢を提示するより先に方針を示してくれることが多かった。「クリーンアーキテクチャ + Package by Feature + 関数型」「Logic / UI Hooks / Component の分離」「Zodで I/O 一元管理」など、どれも的確な選択だと感じた。

特に「拡張しやすく、捨てやすい形で」という方針は設計において重要な視点。Package by Feature で機能をフォルダ単位で管理すれば、不要になった機能はフォルダごと削除するだけで済む。この「捨てやすさ」を意識した設計は、長期的なメンテナンス性に大きく貢献すると思う。

## 反省点

設計書（plan.md）が1000行を超えてしまった。最初から分割すべきだったかもしれない。ただ、全体像を一旦まとめてから分割する方がユーザーにとって確認しやすかった可能性もあり、一概にミスとは言えない。

AskUserQuestion を使った対話は比較的スムーズに進んだが、選択肢の提示が適切だったか自信がない部分もある。例えば ORM の選択で Drizzle を推奨したが、ユーザーが既に Drizzle を想定していた可能性が高く、質問自体が不要だったかもしれない。

## 学び

- 「捨てやすさ」を設計方針に入れるのは良いアプローチ
- マルチプロバイダー対応の認証は最初から抽象化しておくと後が楽
- モバイルレイアウトは後から追加するより、最初から考慮しておく方が設計の一貫性が保てる
