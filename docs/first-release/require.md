# 公認会計士学習サポートアプリ 要件定義（ドラフト）

## 1. 目的・位置づけ

- 本アプリは **公認会計士試験の主学習（予備校・テキスト・問題集）を代替しない**
- 主学習を前提として、
  - 科目構成・出題範囲を俯瞰できる「論点マップ」
  - 各論点について理解を深めるための **論点特化 AI チャット**
  - 学習過程（思考・質問）をノートとして蓄積・可視化
  を提供する **理解深化・思考整理特化型アプリ**とする

---

## 2. 想定ユーザー

- 公認会計士試験の受験生
- すでに以下を保有・利用していることを前提
  - 予備校テキスト／講義
  - 問題集・答練・過去問
- ニーズ
  - 「論点全体像を把握したい」
  - 「解説を読んでも分からない部分を深掘りしたい」
  - 「自分がどこでつまずいたかを後から振り返りたい」

---

## 3. 非ゴール（やらないこと）

- 過去問全文の提供・再配布
- 予備校テキストの代替
- 正誤の最終保証・合否判定
- 本試験出題予測
- フリーフォームの汎用 AI チャット

---

## 4. 全体アーキテクチャ概要

```
[ フロントエンド ]
↓
[ Application / UseCase 層 ]
↓
[ Domain（論点・学習ログ） ]
↓
[ AI Orchestration Layer ]
├─ OCR AI（画像 → テキスト）
├─ 回答 AI（DeepSeek-V3）
└─ 要約・評価 AI
```

---

## 5. ドメインモデル（骨格）

### 5.1 試験・科目・論点

- Exam（例：公認会計士試験）
- Subject（財務会計論／管理会計論／監査論／企業法 など）
- Topic（論点）
  - 出題範囲 PDF（金融庁公開資料）を一次情報として初期投入
  - 正確性は前提としない（draft 状態）
  - 後から編集・分割・統合可能

### 5.2 論点の役割

- 主学習の「地図」
- AI チャット・ノート・学習ログの **紐づけキー**

---

## 6. 機能要件

### 6.1 論点マップ機能

- 科目 → 論点一覧の表示
- 出題範囲ベースの論点リスト
- 難易度・形式（計算／理論）などのメタ情報
- 論点自体の「理解済み／未理解」のチェックは **ユーザー手動**

---

### 6.2 論点特化 AI チャット（中核機能）

#### スコープ

- 1 論点に完全固定
- 他論点・他科目への横断質問は禁止

#### AI の役割

- 解説の言い換え
- 因果関係の説明
- 途中計算・前提条件の補足
- 同一論点内での別例提示

#### UI 特性

- 独立した汎用チャット画面は持たない
- 論点詳細画面の一部として配置
- 履歴は **論点単位で閉じる**

---

### 6.3 問題画像対応（オプション機能）

#### 想定フロー

1. ユーザーが問題画像をアップロード
2. OCR 特化 AI が画像からテキスト・数値・表構造を抽出
3. 構造化テキストを DeepSeek-V3 に渡す
4. 解法プロセス・説明を生成
5. 以降の深掘りは論点特化チャットで実施

#### 方針

- 画像理解と解法を同一モデルに任せない
- OCR と推論を分離することで安定性を確保

---

### 6.4 質問の質評価（チェックマーク機能）

#### 判定対象

- **理解度そのものではなく「質問の性質」**

#### 評価観点（例）

- 因果を問う質問か
- 前提を明示しているか
- 仮説提示が含まれているか
- 論点スコープを守っているか

#### 出力

- ✔︎：理解を深める質問
- △：確認的・表層的質問
- × は表示しない

#### 重要な制約

- 論点自体に「理解済み」マークは付けない
- AI に「間違いない」「完全理解」を言わせない

---

### 6.5 ノート化機能

- 論点ごとに
  - 質問
  - AI の回答
  - 質問評価マーク
  を時系列で保存
- チャットログそのままではなく
  - 要約
  - 構造化メモ
  として保持
- 後から
  - 「自分がどこでつまずいたか」
  - 「どんな思考をしたか」
  を振り返れる

---

## 7. AI 構成要件

### 7.1 回答 AI

- DeepSeek-V3
- 役割：解法説明・論点内対話
- 前提：入力テキストは正確であること（OCR 後）

### 7.2 OCR AI

- OpenRouter 上の Vision / OCR 対応モデル
- 役割：画像 → テキスト・数値・構造抽出
- 知能は不要、認識精度重視

### 7.3 要約・評価 AI

- 回答 AI と分離
- 入力：
  - ユーザー質問
  - AI 応答
  - 論点 ID
- 出力：
  - 論点ノート用要約
  - 質問タイプ判定
  - チェックマーク用フラグ

---

## 8. 非機能要件

- AI はすべて **補助的存在**
- 正解保証・断定表現を UI に出さない
- 法的配慮
  - 過去問全文を保存しない
  - 予備校教材を再利用しない
- モデル差し替え可能な設計
- 学習ログは将来の改善（論点再設計）に利用可能

---

## 9. 成功指標（定性的）

- 論点ごとの質問回数・質が可視化されている
- ユーザーが
  - 「分からない所を言語化できた」
  - 「思考の履歴が残っている」
  と感じられる
- 主学習（予備校・テキスト）と併用される

---

## 10. 要件定義のまとめ

- 本アプリの価値は **知識提供ではなく思考支援**
- AI の役割は **説明・対話・整理**
- 正しさの最終判断はユーザーに委ねる
- 「論点 × 対話 × ノート」という構造を中核に据える