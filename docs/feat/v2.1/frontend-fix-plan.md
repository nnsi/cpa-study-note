# 学習タブのナビゲーション改善

## 問題

「学習」タブから論点一覧（学習画面）に辿り着けない。

**現状の導線:**
```
学習タブ → /domains (学習領域) [編集ボタンあり]
        → /domains/$domainId/subjects (科目一覧) [編集・削除ボタンあり]
        → /domains/$domainId/subjects/$subjectId (科目詳細 = TreeEditor 編集画面)
```

**問題点:**
- 学習タブなのに編集画面に辿り着く
- 学習タブ内に編集機能が混在している
- ユーザーのメンタルモデル（学習タブ = 勉強したい）に反する

## 解決策

1. **学習タブは学習専用** - 編集機能を一切排除
2. **学習用単元一覧ページを新設** - シンプルな単元選択UI
3. **編集機能はホームからアクセス** - 「📂 科目の構造を編集」リンク

**新しい導線:**
```
【学習】
学習タブ → /domains (学習領域 - 編集なし)
        → /domains/$domainId/subjects (科目一覧 - 編集なし)
        → /domains/$domainId/subjects/$subjectId (単元一覧 - 学習用) ← 新設
        → /domains/$domainId/subjects/$subjectId/$categoryId (論点一覧)
        → /domains/$domainId/subjects/$subjectId/$categoryId/$topicId (チャット)

【編集】
ホーム → 「📂 科目の構造を編集」リンク
      → /domains/$domainId/subjects/$subjectId/edit (TreeEditor)
```

## 変更内容

### 1. 新規作成: 学習用単元一覧ページ
**ファイル:** `apps/web/src/routes/domains/$domainId/subjects/$subjectId/index.tsx`

- 現在のTreeEditorを置き換え
- シンプルな単元選択UI（大単元 → 中単元をカード形式）
- 中単元クリック → 論点一覧へ
- 各中単元に論点数、学習進捗を表示
- **編集機能なし**

### 2. 新規作成: 編集ページ
**ファイル:** `apps/web/src/routes/domains/$domainId/subjects/$subjectId/edit.tsx`

- TreeEditorをここに移動

### 3. 修正: 学習領域一覧ページ
**ファイル:** `apps/web/src/routes/domains/index.tsx`

- 編集・削除ボタンを削除
- 「開く」ボタンのみ残す

### 4. 修正: 科目一覧ページ
**ファイル:** `apps/web/src/routes/domains/$domainId/subjects/index.tsx`

- 編集・削除ボタンを削除
- 「開く」ボタンのみ残す
- 「新規作成」ボタンも削除（編集画面からのみ作成可能に）

### 5. 修正: ホームページ
**ファイル:** `apps/web/src/routes/index.tsx`

- 「📂 科目の構造を編集」リンクを追加
- クリック → 科目選択 → TreeEditor

### 6. 新規作成: 編集用科目選択ページ（必要に応じて）
**ファイル:** `apps/web/src/routes/edit/index.tsx`（または既存ページを流用）

- 編集対象の科目を選択する画面
- ここから学習領域・科目の作成/編集/削除も可能

## 単元一覧UIデザイン（学習専用）

```
┌─────────────────────────────────────────────┐
│ ← 科目一覧                                  │
│ 財務会計論                                  │
├─────────────────────────────────────────────┤
│                                             │
│ 📂 新しい単元                               │
│ ┌─────────────────────────────────────────┐ │
│ │ 📁 新しい中単元                    (3)  │ │
│ │    論点3件 | 学習済み 1/3               │ │
│ └─────────────────────────────────────────┘ │
│                                             │
│ 📂 別の単元                                 │
│ ┌─────────────────────────────────────────┐ │
│ │ 📁 中単元A                         (5)  │ │
│ │    論点5件 | 学習済み 0/5               │ │
│ ├─────────────────────────────────────────┤ │
│ │ 📁 中単元B                         (2)  │ │
│ │    論点2件 | 学習済み 2/2 ✓             │ │
│ └─────────────────────────────────────────┘ │
└─────────────────────────────────────────────┘
```

## ファイル構成

```
apps/web/src/routes/
├── index.tsx                    ← ホーム（「📂 科目の構造を編集」リンク追加）
├── edit/
│   └── index.tsx               ← 編集用科目選択（新規作成）
└── domains/$domainId/subjects/$subjectId/
    ├── index.tsx               ← 学習用単元一覧（書き換え）
    ├── edit.tsx                ← TreeEditor（新規作成）
    └── $categoryId/
        ├── index.tsx           ← 論点一覧（既存）
        └── $topicId.tsx        ← チャット（既存）
```

## 検証方法

1. `pnpm --filter web dev` で開発サーバー起動

2. **学習導線の確認:**
   - ホーム → 学習タブ → 学習領域（編集ボタンなし）
   - → 科目「開く」（編集ボタンなし）
   - → 単元一覧（学習用）が表示される
   - → 中単元クリック → 論点一覧
   - → 論点クリック → チャット画面
   - → 「← 単元一覧」で戻れる

3. **編集導線の確認:**
   - ホーム → 「📂 科目の構造を編集」
   - → 科目選択 → TreeEditor画面
