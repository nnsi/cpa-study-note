# 学習計画ドメイン 機能設計（思想整合版）

本ドキュメントは、既存の学習支援アプリ思想  
（評価しない／保証しない／ユーザー主体／痕跡重視）  
と矛盾しない形で「学習計画」を扱うための **ドメイン・機能設計** を定義する。

---

## 0. 前提思想（再確認・制約条件）

学習計画に関して、以下は**明示的に行わない**。

- 合格・成果・到達の保証
- 計画達成度の評価
- 計画逸脱の失敗扱い
- 行動量・進捗率・遵守率の算出
- AIによる最適計画の提示・強制

学習計画は以下として扱う。

- 思考の外在化
- 仮説
- 認識整理の一形態
- 後から見返される「痕跡」

---

## 1. ドメイン追加：StudyPlan（学習計画）

### 1.1 ドメイン定義

> 学習者が「どう学ぼうと考えたか」を記録する構造体  
> 行動を管理するものではなく、思考のスナップショット

---

## 2. エンティティ設計

### 2.1 StudyPlan（集約ルート）

| 属性 | 型 | 説明 |
|---|---|---|
| id | UUID | 計画ID |
| title | string | 計画の名称（任意） |
| intent | text | この計画を立てた意図・背景 |
| scope | enum | 計画の対象範囲（例：全体／科目／論点群） |
| createdAt | datetime | 作成日時 |
| archivedAt | datetime? | 非アクティブ化日時 |
| createdBy | userId | 作成者 |

※ アクティブ／非アクティブは「使っている／使っていない」の区別のみ  
※ 完了・未完了という概念は持たない

---

### 2.2 StudyPlanItem（計画要素）

| 属性 | 型 | 説明 |
|---|---|---|
| id | UUID | 要素ID |
| studyPlanId | UUID | 所属計画 |
| topicId | UUID? | 関連するTopic（必須ではない） |
| description | text | やろうと考えた内容 |
| rationale | text | そう考えた理由・判断根拠 |
| orderIndex | number | 並び順（意味は持たない） |
| createdAt | datetime | 作成日時 |

※ 「やる／やらない」「終わった／終わってない」は保持しない  
※ 優先度・期限・重み付けは持たない

---

### 2.3 StudyPlanRevision（計画の変遷）

| 属性 | 型 | 説明 |
|---|---|---|
| id | UUID | リビジョンID |
| studyPlanId | UUID | 対象計画 |
| summary | text | 何をどう変えたか |
| reason | text | なぜ変えたか |
| createdAt | datetime | 作成日時 |

> 計画は「更新」ではなく「変遷」として扱う  
> 変更履歴は消さない

---

## 3. AIとの関係（責務分離）

### 3.1 AIが関与できる範囲（事実ベース支援）

- Topic構造の整理
- 論点間の依存関係の言語化
- 学習順序の一般的パターンの提示
- 「この計画は何を前提にしているか」の言語化
- 抜け落ちやすい論点の列挙（網羅性保証はしない）

### 3.2 AIが関与しない範囲

- この計画で合格できるかの判断
- 最適・最短・効率的といった断定
- 実行可否・達成度の判定
- 計画遵守の促進

---

## 4. UI / UX 原則

### 4.1 表示方針

- 進捗バーを表示しない
- 完了チェックを置かない
- 「遅れ」「未達」といった語彙を使わない
- 過去の計画を参照可能にする

### 4.2 操作方針

- 計画はいつでも複製・放棄・アーカイブ可能
- 変更時は「なぜ変えたか」を記録できる
- 計画と実際の学習ログは自動では結びつかない

---

## 5. 既存ドメインとの関係

### 5.1 Topic

- StudyPlanItem は Topic を参照できる
- Topic 側は StudyPlan の存在を知らない（一方向依存）

### 5.2 Log / Note / Chat

- 学習ログは計画と独立
- 計画は「振り返りの視点」として後から参照される

---

## 6. この設計が守っている不変条件

- 主体は常にユーザー
- 計画は仮説であり保証ではない
- 学習は管理対象ではない
- 記録は評価より優先される
- 変更・迷い・揺れを前提とする

---

## 7. このドメインが提供する価値（整理）

- 「どう学ぼうと考えたか」を残せる
- 計画が外れても破綻しない
- 後から自分の判断の癖を振り返れる
- AIを使っても主体性が侵食されない

---

## 8. 非ゴール（明示）

- 学習管理ツールにはならない
- 行動促進アプリにはならない
- 合格ナビゲーションは行わない